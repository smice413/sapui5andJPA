/*
 * ! OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/mdc/util/PropertyHelper"],function(P){"use strict";var a=P.extend("sap.ui.mdc.table.PropertyHelper");function i(C){if(!C||!C.isA||!C.isA("sap.ui.mdc.table.Column")){return false;}return true;}function g(w){if(w.indexOf("em")>0){return Math.round(parseFloat(w));}if(w.indexOf("px")>0){return Math.round(parseInt(w)/16);}return"";}a.prototype.getTable=function(){return this.getParent();};a.prototype.getColumnExportSettings=function(C,s){if(!i(C)){return null;}var p=this.getProperty(C.getDataProperty());if(!p){return null;}s=s===true;var d=[];var e;var E=this.getExportSettings(p);var o;var f=[];var A;var h;var j;var k;if(this.isComplex(p)){e=this.getPropertiesFromComplexProperty(p);if(!s&&E){o=c(this,C,p,E);e.forEach(function(l){f.push(this.getPath(l));},this);o.property=f;d.push(o);}else{e.forEach(function(l,I){var m=this.getExportSettings(l),n=c(this,C,l,m);n.property=this.getPath(l);if(I>0){n.columnId=C.getId()+"-additionalProperty"+I;}d.push(n);},this);}}else if(!s&&E){o=c(this,C,p,E);o.property=this.getPath(p);d.push(o);}else{o=c(this,C,p,E);o.property=this.getPath(p);o.displayUnit=!s?true:false;d.push(o);A=s&&E&&E.unitProperty?E.unitProperty:null;if(A){h=b(this,A);j=this.getExportSettings(h);k=c(this,C,h,j);k.property=this.getPath(h);k.columnId=C.getId()+"-additionalProperty";d.push(k);}}return d;};function b(p,s){var o=p.getPropertyMap()[s];if(!o){o=p.getProperties().find(function(C){return s===C.path;});}if(p.isComplex(o)){throw new Error("The 'unitProperty' points to a complex property");}return o;}function c(p,C,o,e){return Object.assign({columnId:C.getId(),label:p.getLabel(o),width:g(C.getWidth()),textAlign:C.getHAlign(),type:"String"},e);}return a;});
