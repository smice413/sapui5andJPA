/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./overlay/Overlay","./Tooltip"],function(O,T){"use strict";var a=30;var R=function(m,i){this.oImg=i;this.oOverlay=new O(this.oImg.parentNode);this.oToolTip=new T(this.oImg.parentNode);this.iOriginalWidth=i.naturalWidth;this.areas=Array.prototype.map.call(m.getElementsByTagName('area'),function(A){A.addEventListener("mouseenter",this.onmouseenter.bind(this));A.addEventListener("mouseleave",this.onmouseleave.bind(this));return{element:A,originalCoords:A.getAttribute('originalCoords').split(',')};},this);this.resize();};R.prototype.resize=function(){var n,r=this.oImg.offsetWidth/this.iOriginalWidth;this.areas.forEach(function(A){n=[];A.originalCoords.forEach(function(o){n.push(Math.round(o*r));});A.element.coords=n.join(',');});return true;};R.prototype.onmouseenter=function(e){var c=e.target.coords,s=e.target.getAttribute("shape"),r=this.oImg.getBoundingClientRect();this.sTitle=e.target.getAttribute('title');e.target.setAttribute('title','');this.oOverlay.setShape(s,c);this.oOverlay.show();if(this.sTitle){this.oToolTip.setText(this.sTitle);this.oToolTip.setPosition({top:(e.clientY-r.top)-(this.oToolTip.getBounds().offsetHeight+a),left:(e.clientX-r.left)-(this.oToolTip.getBounds().offsetWidth/2)});this.oToolTip.show();}};R.prototype.onmouseleave=function(e){e.target.setAttribute('title',this.sTitle);this.oOverlay.hide();this.oToolTip.hide();};return R;});
