/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./BindingHelper","./CardActions","sap/ui/base/Object","sap/base/util/merge","sap/ui/integration/cards/AdaptiveContent","sap/ui/integration/cards/AnalyticalContent","sap/ui/integration/cards/AnalyticsCloudContent","sap/ui/integration/cards/CalendarContent","sap/ui/integration/cards/ComponentContent","sap/ui/integration/cards/ListContent","sap/ui/integration/cards/ObjectContent","sap/ui/integration/cards/TableContent","sap/ui/integration/cards/TimelineContent"],function(B,C,a,m,A,b,c,d,e,L,O,T,f){"use strict";var g=a.extend("sap.ui.integration.util.ContentFactory",{constructor:function(o){a.call(this);this._oCard=o;}});g.prototype.create=function(h){var o=this._oCard,t=h.cardType;return new Promise(function(r,i){var j=this.getClass(t);if(!j){i(t.toUpperCase()+" content type is not supported.");return;}var k=new j();k.setCard(o);if(k instanceof A){k.setCardDataProvider(o._oDataProvider);}k.loadDependencies(h.contentManifest).then(function(){if((h.cardManifest&&h.cardManifest.isDestroyed())||(h.dataProviderFactory&&h.dataProviderFactory.isDestroyed())){i();return;}var l=new C({card:o});k._sAppId=h.appId;k.setServiceManager(h.serviceManager);k.setDataProviderFactory(h.dataProviderFactory);k.setIconFormatter(h.iconFormatter);k.setActions(l);if(t.toLowerCase()!=="adaptivecard"){k.setConfiguration(this._createBindingInfos(h.contentManifest),t);}else{k.setConfiguration(h.contentManifest);}r(k);}.bind(this)).catch(function(E){i(E);});}.bind(this));};g.prototype.getClass=function(t){switch(t.toLowerCase()){case"adaptivecard":return A;case"analytical":return b;case"analyticscloud":return c;case"calendar":return d;case"component":return e;case"list":return L;case"object":return O;case"table":return T;case"timeline":return f;default:return null;}};g.prototype._createBindingInfos=function(o){var r=m({},o),D=r.data;delete r.data;r=B.createBindingInfos(r);if(D){r.data=D;}return r;};return g;});
